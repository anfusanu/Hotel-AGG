<link
  href="https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.css"
  rel="stylesheet"
/>
<link rel="stylesheet" href="/templates/addons/rater-js/style.css">

<script src="https://api.mapbox.com/mapbox-gl-js/v2.3.1/mapbox-gl.js"></script>
<!-- Load the `mapbox-gl-geocoder` plugin. -->
<script
  src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js"
></script>
<link
  rel="stylesheet"
  href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css"
  type="text/css"
/>
<!-- Promise polyfill script is required -->

<!-- to use Mapbox GL Geocoder in IE 11. -->
<script
  src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"
></script>
<script
  src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"
></script>

<main>
  <section class="hero_in hotels_detail">
    <div class="wrapper">
      <div class="container">
        <h1 class="fadeInUp"><span></span>{{portalDetails.portalTitle}}</h1>
      </div>
      <span class="magnific-gallery">
        <a
          href="img/gallery/hotel_list_1.jpg"
          class="btn_photos"
          title="Photo title"
          data-effect="mfp-zoom-in"
        >View photos</a>
        <a
          href="img/gallery/hotel_list_2.jpg"
          title="Photo title"
          data-effect="mfp-zoom-in"
        ></a>
        <a
          href="img/gallery/hotel_list_3.jpg"
          title="Photo title"
          data-effect="mfp-zoom-in"
        ></a>
      </span>
    </div>
  </section>
  <!--/hero_in-->

  <div class="bg_color_1">
    <nav class="secondary_nav sticky_horizontal">
      <div class="container">
        <ul class="clearfix">
          <li><a href="#description" class="active">Description</a></li>
          <li><a href="#reviews">Reviews</a></li>
          <li><a href="#sidebar">Booking</a></li>
        </ul>
      </div>
    </nav>
    <div class="container margin_60_35">
      <div class="row">
        <div class="col-lg-12">
          <section id="description">
            <h2>Description</h2>
            <p>{{portalDetails.portalBio}}</p>
            <div class="row">
              <div class="col-lg-6">
                <ul class="bullets">
                  <li>Dolorem mediocritatem</li>
                  <li>Mea appareat</li>
                  <li>Prima causae</li>
                  <li>Singulis indoctum</li>
                </ul>
              </div>
              <div class="col-lg-6">
                <ul class="bullets">
                  <li>Timeam inimicus</li>
                  <li>Oportere democritum</li>
                  <li>Cetero inermis</li>
                  <li>Pertinacia eum</li>
                </ul>
              </div>
            </div>
            <!-- /row -->
            <hr />
            <h3>Instagram photos feed</h3>
            <div id="instagram-feed-hotel" class="clearfix"></div>
            <hr />

            {{#each roomServices}}

              <div class="room_type" style="cursor: pointer;" onclick="gotoRoom('{{this._id}}')">
                <div class="row">
                  <div
                    class="col-md-4"
                    style="background : url({{this.roomImages.[0]}}) center;  background-size: cover;"
                  ></div>
                  <div class="col-md-8">
                    <h4>{{this.roomTitle}}</h4>
                    <p>{{this.roomDescription}}</p>
                    <ul class="hotel_facilities">
                      <li><img
                          src="img/hotel_facilites_icon_3.svg"
                          alt=""
                        />King size Bed</li>
                      <li><img
                          src="img/hotel_facilites_icon_4.svg"
                          alt=""
                        />Free Wifi</li>
                      <li><img
                          src="img/hotel_facilites_icon_6.svg"
                          alt=""
                        />Bathtub</li>
                      <li><img src="img/hotel_facilites_icon_7.svg" alt="" />Air
                        Condition</li>
                      <li><img
                          src="img/hotel_facilites_icon_9.svg"
                          alt=""
                        />Swimming pool</li>
                      <li><img
                          src="img/hotel_facilites_icon_3.svg"
                          alt=""
                        />Hairdryer</li>
                    </ul>
                  </div>
                </div>
                <!-- /row -->
              </div>

            {{/each}}

            <!-- /rom_type -->
            <hr />
            <h3>Location</h3>
            <div id="map" class="map map_single add_bottom_30"></div>
            <!-- End Map -->
          </section>
          <!-- /section -->

          <section id="reviews">
            <h2>Reviews</h2>
            <div class="reviews-container">
              <div class="row">
                <div class="col-lg-3">
                  <div id="review_summary">
                    <strong>8.5</strong>
                    <em>Superb</em>
                    <small>Based on 4 reviews</small>
                  </div>
                </div>
                <div class="col-lg-9">
                  <div class="row">
                    <div class="col-lg-10 col-9">
                      <div class="progress">
                        <div
                          class="progress-bar"
                          role="progressbar"
                          style="width: 90%"
                          aria-valuenow="90"
                          aria-valuemin="0"
                          aria-valuemax="100"
                        ></div>
                      </div>
                    </div>
                    <div class="col-lg-2 col-3"><small><strong>5 stars</strong></small></div>
                  </div>
                  <!-- /row -->
                  <div class="row">
                    <div class="col-lg-10 col-9">
                      <div class="progress">
                        <div
                          class="progress-bar"
                          role="progressbar"
                          style="width: 95%"
                          aria-valuenow="95"
                          aria-valuemin="0"
                          aria-valuemax="100"
                        ></div>
                      </div>
                    </div>
                    <div class="col-lg-2 col-3"><small><strong>4 stars</strong></small></div>
                  </div>
                  <!-- /row -->
                  <div class="row">
                    <div class="col-lg-10 col-9">
                      <div class="progress">
                        <div
                          class="progress-bar"
                          role="progressbar"
                          style="width: 60%"
                          aria-valuenow="60"
                          aria-valuemin="0"
                          aria-valuemax="100"
                        ></div>
                      </div>
                    </div>
                    <div class="col-lg-2 col-3"><small><strong>3 stars</strong></small></div>
                  </div>
                  <!-- /row -->
                  <div class="row">
                    <div class="col-lg-10 col-9">
                      <div class="progress">
                        <div
                          class="progress-bar"
                          role="progressbar"
                          style="width: 20%"
                          aria-valuenow="20"
                          aria-valuemin="0"
                          aria-valuemax="100"
                        ></div>
                      </div>
                    </div>
                    <div class="col-lg-2 col-3"><small><strong>2 stars</strong></small></div>
                  </div>
                  <!-- /row -->
                  <div class="row">
                    <div class="col-lg-10 col-9">
                      <div class="progress">
                        <div
                          class="progress-bar"
                          role="progressbar"
                          style="width: 0"
                          aria-valuenow="0"
                          aria-valuemin="0"
                          aria-valuemax="100"
                        ></div>
                      </div>
                    </div>
                    <div class="col-lg-2 col-3"><small><strong>1 stars</strong></small></div>
                  </div>
                  <!-- /row -->
                </div>
              </div>
              <!-- /row -->
            </div>

            <hr />

            <div class="reviews-container">

              <div class="review-box clearfix">
                <figure class="rev-thumb"><img src="img/avatar1.jpg" alt="" />
                </figure>
                <div class="rev-content">
                  <div class="rating">
                    <i class="icon_star voted"></i><i
                      class="icon_star voted"
                    ></i><i class="icon_star voted"></i><i
                      class="icon_star voted"
                    ></i><i class="icon_star"></i>
                  </div>
                  <div class="rev-info">
                    Admin – April 03, 2016:
                  </div>
                  <div class="rev-text">
                    <p>
                      Sed eget turpis a pede tempor malesuada. Vivamus quis mi
                      at leo pulvinar hendrerit. Cum sociis natoque penatibus et
                      magnis dis
                    </p>
                  </div>
                </div>
              </div>
              <!-- /review-box -->
              <div class="review-box clearfix">
                <figure class="rev-thumb"><img src="img/avatar2.jpg" alt="" />
                </figure>
                <div class="rev-content">
                  <div class="rating">
                    <i class="icon-star voted"></i><i
                      class="icon_star voted"
                    ></i><i class="icon_star voted"></i><i
                      class="icon_star voted"
                    ></i><i class="icon_star"></i>
                  </div>
                  <div class="rev-info">
                    Ahsan – April 01, 2016:
                  </div>
                  <div class="rev-text">
                    <p>
                      Sed eget turpis a pede tempor malesuada. Vivamus quis mi
                      at leo pulvinar hendrerit. Cum sociis natoque penatibus et
                      magnis dis
                    </p>
                  </div>
                </div>
              </div>
              <!-- /review-box -->
              <div class="review-box clearfix">
                <figure class="rev-thumb"><img src="img/avatar3.jpg" alt="" />
                </figure>
                <div class="rev-content">
                  <div class="rating">
                    <i class="icon-star voted"></i><i
                      class="icon_star voted"
                    ></i><i class="icon_star voted"></i><i
                      class="icon_star voted"
                    ></i><i class="icon_star"></i>
                  </div>
                  <div class="rev-info">
                    Sara – March 31, 2016:
                  </div>
                  <div class="rev-text">
                    <p>
                      Sed eget turpis a pede tempor malesuada. Vivamus quis mi
                      at leo pulvinar hendrerit. Cum sociis natoque penatibus et
                      magnis dis
                    </p>
                  </div>
                </div>
              </div>
              <!-- /review-box -->
            </div>
            <!-- /review-container -->
          </section>
          <!-- /section -->
          <hr />

          <div class="add-review">
            <h5>Leave a Review</h5>
            <form id="reviewForm">
              <div class="row">
                <label for="" class="py-2 px-4">Rating</label>
                <div class="form-group col-md-12">
                  <div id="step"></div>
                  <input type="hidden" name="reviewRating" id="reviewRating" value="0.5">
                </div>

                <div class="form-group col-md-12">
                  <label>Heading *</label>
                  <input
                    type="text"
                    name="reviewSubject"
                    id="reviewSubject"
                    placeholder=""
                    class="form-control"
                  />
                </div>

                <div class="form-group col-md-12">
                  <label>Your Review</label>
                  <textarea
                    name="reviewText"
                    id="reviewText"
                    class="form-control"
                    style="height:130px;"
                  ></textarea>
                </div>
                <div class="form-group col-md-12 add_top_20">
                  <input
                    type="submit"
                    value="Submit"
                    class="btn_1"
                    id="submit-review"
                  />
                </div>
              </div>
            </form>
          </div>
        </div>
        <!-- /col -->

      </div>
      <!-- /row -->
    </div>
    <!-- /container -->
  </div>
  <!-- /bg_color_1 -->
</main>
<!--/main-->

<script src="/templates/user-template/js/jquery-2.2.4.min.js"></script>
<script src="/templates/user-template/js/common_scripts.js"></script>
<script src="/templates/user-template/js/main.js"></script>
<script src="/templates/user-template/assets/validate.js"></script>

<script src="/templates/addons/rater-js/rater-js.js"></script>
<script>
  window.raterJs({
    element:document.querySelector("#step"),
    rateCallback:function rateCallback(rating, done) {
        this.setRating(rating); 
        $('#reviewRating').val(rating)
        done(); 
    },
    starSize:28,
    step:0.5,

})
</script>

<script>
  document.getElementById('reviewForm').addEventListener('submit',(event) => {
    event.preventDefault();
    let reviewText = $('#reviewText').val()
    let reviewSubject = $('#reviewSubject').val()
    let reviewRating = $('#reviewRating').val()
    console.log(reviewRating)
    console.log(reviewText)
    console.log(reviewSubject)

  })
</script>
<script src="https://momentjs.com/downloads/moment.js"></script>
<script>
  $('.room_type').hover(
function(){$(this).toggleClass('gray');}
);

function gotoRoom (roomId){

  let getDate = moment()
  let dateFrom = getDate.format('MM-DD-YYYY')
  let dateTo = getDate.add(1, 'days').format('MM-DD-YYYY')
  let guestQty = 1

  window.location.href = `/app/hotel-room-detail?roomId=${roomId}&dateFrom=${dateFrom}&dateTo=${dateTo}&guestQty=${guestQty}`
}
</script>

<!-- SPECIFIC SCRIPTS -->
<script src="/templates/user-template/js/pw_strenght.js"></script>


<script>
  mapboxgl.accessToken =
    'pk.eyJ1IjoiYW5mdXNhbnUiLCJhIjoiY2tyazNiZXdiMG1mbzMxbGluZ2V1YW1iZiJ9.IH0s4V3VCqZeAERV01LooA';
  var map = new mapboxgl.Map({
    container: 'map',
    style: 'mapbox://styles/mapbox/streets-v11',
    center: [ {{portalDetails.location.coordinates.[0]}} , {{portalDetails.location.coordinates.[1]}}],
    zoom: 13
  });
  map.on('click', (e) => {
     if (navigator.geolocation) {
        navigator.geolocation.getCurrentPosition(function (position) {
          window.open(`https://www.google.com/maps/dir/?api=1&origin=${position.coords.latitude},${position.coords.longitude}&destination={{portalDetails.location.coordinates.[1]}},{{portalDetails.location.coordinates.[0]}}`)
        });
      } else {
        alert("Sorry, your browser does not support HTML5 geolocation.");
      }
  }) 
  const marker = new
  mapboxgl.Marker({
    draggable: false
  }).setLngLat([ {{portalDetails.location.coordinates.[0]}} , {{portalDetails.location.coordinates.[1]}}] ).addTo(map)


</script>